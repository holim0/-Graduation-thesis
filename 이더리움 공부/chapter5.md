
# μ§€κ°‘ κΈ°μ μ κ°μ”

β… μ΄λ”λ¦¬μ›€μ—μ„ μ§€κ°‘μ€ λ‹¨μ§€ ν‚¤λ§μ„ λ³΄μ ν•©λ‹λ‹¤. 

μ‚¬μ©μλ” μ§€κ°‘μ— μλ” ν‚¤λ΅ νΈλμ­μ…μ„ μ„λ…ν•¨μΌλ΅μ¨ μ΄λ”κ°€ μ§€μ‹ μ μ†μ μ„μ„ μ¦λ…ν•κ³  ν† ν°μ„ μ μ–΄ν•©λ‹λ‹¤.

> λ”°λΌμ„ μ΄λ”λ¦¬μ›€μ μ§€κ°‘μ€ **ν‚¤μ²΄μΈ(Keychain)**μ΄λΌκ³  ν•  μ μμµλ‹λ‹¤.


# μ§€κ°‘μ ν•νƒ
β… μ§€κ°‘μ ν•νƒλ” λ‘ κ°€μ§€κ°€ μλ”λ° μ§€κ°‘μ΄ ν¬ν•¨ν•λ” ν‚¤κ°€ μ„λ΅ κ΄€λ ¨μ΄ μλλƒ μ—†λλƒμ— λ”°λΌμ„ **λΉ„κ²°μ •μ  μ§€κ°‘**κ³Ό **κ²°μ •μ  μ§€κ°‘**μΌλ΅ κµ¬λ¶„λ©λ‹λ‹¤.

κ°κ°μ— λ€ν•΄μ„ μ‚΄ν΄λ³΄κ² μµλ‹λ‹¤.π§

## λΉ„κ²°μ •μ (λ¬΄μ‘μ„) μ§€κ°‘

β΅οΈ κ°κΈ° μ„λ΅ λ‹¤μ€ λ¬΄μ‘μ„ μλ΅λ¶€ν„° κ°κ°μ ν‚¤λ¥Ό λ¬΄μ‘μ„μ μΌλ΅ μ¶”μ¶ν•λ” λ°©μ‹μ…λ‹λ‹¤.


μκΈμ„ λ°›μ„ λ•λ§λ‹¤ μƒλ΅μ΄ κ°μΈν‚¤κ°€ ν•„μ”ν• μƒλ΅μ΄ μ£Όμ†λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.

μ΄ λ§μ€ λ•λ§λ‹¤ λ¨λ‘ μƒλ΅μ΄ μ£Όμ†λ¥Ό μ„ν• μƒλ΅μ΄ μ§€κ°‘ νμΌμ„ λ§λ“¤μ–΄μ•Ό ν•λ‹¤λ” μλ―Έμ…λ‹λ‹¤.

ν•μ§€λ§ λ§μ€ μ΄λ”λ¦¬μ›€ ν΄λΌμ΄μ–ΈνΈλ” λ³΄μ• κ°•ν™”λ¥Ό μ„ν•΄ μ•”νΈλ¬ΈμΌλ΅ μ•”νΈν™”λ λ‹¨μΌ κ°μΈν‚¤κ°€ λ“¤μ–΄μλ”, JSON μΈμ½”λ”© νμΌμΈ **ν‚¤μ €μ¥μ†(keystore)**νμΌμ„ μ‚¬μ©ν•λ©° κ·Έ λ‚΄μ©μ€ μ•„λμ™€ κ°™μµλ‹λ‹¤.

```js
// keyObject:
{
  address: "008aeeda4d805471df9b2a5b0f38a0c3bcba786b",
  Crypto: {
    cipher: "aes-128-ctr",
    ciphertext: "5318b4d5bcd28de64ee5559e671353e16f075ecae9f99c7a79a38af5f869aa46",
    cipherparams: {
      iv: "6087dab2f9fdbbfaddc31a909735c1e6"
    },
    mac: "517ead924a9d0dc3124507e3393d175ce3ff7c1e96529c6c555ce9e51205e9b2",
    kdf: "pbkdf2",
    kdfparams: {
      c: 262144,
      dklen: 32,
      prf: "hmac-sha256",
      salt: "ae3cd4e7013836a3df6bd7241b12db061dbe2c6785853cce422d148a624ce0bd"
    }
  },
  id: "e13b209c-3b2f-4327-bab0-3bef2e51630d",
  version: 3
}

//https://github.com/ethereumjs/keythereum

```

ν‚¤ μ €μ¥μ†λ” Brute force, Dictionary, Rainbow table κ³µκ²©μ„ λ€λΉ„ν•΄ μ•”νΈ ν™•μ¥ μ•κ³ λ¦¬μ¦μΌλ΅ μ•λ ¤μ§„ **ν‚¤ νμƒ ν•¨μ(key derivation function, KDF)**λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤. 

</br>

## κ²°μ •μ (μ‹λ“) μ§€κ°‘

β΅οΈ λ¨λ“  ν‚¤κ°€ **μ‹λ“(seed)**λΌκ³  ν•λ” λ‹¨μΌ λ§μ¤ν„° ν‚¤λ΅λ¶€ν„° νμƒλλ” λ°©μ‹μ…λ‹λ‹¤.

κ²°μ •μ  μ§€κ°‘μ„ μΆ€ λ” μ•μ „ν•κ² λ§λ“¤κΈ° μ„ν•΄μ„ μ‹λ“λ” λ‹¨μ–΄ λ©λ΅μΌλ΅ μΈμ½”λ”©λμ–΄ μ§€κ°‘μ„ μ¬μƒμ„±ν•  μ μκ² ν•©λ‹λ‹¤. 

β” μ΄λ¥Ό **λ‹λ¨λ‹‰ μ½”λ“ λ‹¨μ–΄(mnemonic code words)**λΌκ³  ν•©λ‹λ‹¤.


κ²°μ •μ  μ§€κ°‘μ—μ„ μ‹λ“λ” λ¨λ“  νμƒλ ν‚¤λ¥Ό λ³µκµ¬ν•  μ μμµλ‹λ‹¤. κ·Έλ ‡κΈ° λ•λ¬Έμ— μ‹λ“μ λ³΄μ•μ΄ κ°€μ¥ μ¤‘μ”ν•©λ‹λ‹¤.

### HD μ§€κ°‘(BIP-32/BIP-44)

β΅οΈ ν„μ¬ κ°€μ¥ κ°μ„ λ κ²°μ •μ  μ§€κ°‘μ€ λΉ„νΈμ½”μΈμ BIP-32μΌλ΅ μ •μλ HD μ§€κ°‘μ…λ‹λ‹¤. 

HD μ§€κ°‘μ€ μ•„λ μ‚¬μ§„κ³Ό κ°™μ΄ νΈλ¦¬ κµ¬μ΅°λ΅ νμƒλ ν‚¤λ“¤μ„ κ°€μ§€κ³  μμµλ‹λ‹¤.

![](https://images.velog.io/images/holim0/post/7f77c29e-bacd-48ee-a4af-d4a0b5496f51/image.png)


</BR>

---
# λ‹λ¨λ‹‰ μ½”λ“ λ‹¨μ–΄(BIP-39)

β… λ‹λ¨λ‹‰ μ½”λ“ λ‹¨μ–΄λ” κ²°μ •μ  μ§€κ°‘μ„ νμƒν•κΈ° μ„ν•΄ μ‹λ“λ΅ μ‚¬μ©λλ” λ‚μλ¥Ό μΈμ½”λ”©ν•λ” λ‹¨μ–΄ μ‹ν€€μ¤μ…λ‹λ‹¤.

> λ‹¨μ–΄ μ‹ν€€μ¤λ” μ‹λ“λ¥Ό λ‹¤μ‹ λ§λ“¤μ–΄λ‚΄κ³ , μ΄ μ‹λ“λ΅λ¶€ν„° μ§€κ°‘κ³Ό λ¨λ“  νμƒλ ν‚¤λ“¤μ„ μ¬μƒμ„±ν•  μ μμµλ‹λ‹¤. </br>
> λ‹λ¨λ‹‰ μ½”λ“λ” BIP-39μ— μ •μλμ–΄ μμµλ‹λ‹¤.


## λ‹λ¨λ‹‰ λ‹¨μ–΄ μƒμ„±

λ‹λ¨λ‹‰ λ‹¨μ–΄λ” BIP-38μ—μ„ μ •μν• ν‘μ¤€ν™”λ μ μ°¨μ— λ”°λΌ μ§€κ°‘μ—μ„ μλ™μΌλ΅ μƒμ„±λ©λ‹λ‹¤.

κ³Όμ •μ€ λ‹¤μκ³Ό κ°™μµλ‹λ‹¤. (μ‚¬μ§„λ„ μ°Έκ³ ν•μ‹λ©΄ μ΄ν•΄κ°€ λ” μλ  κ²λ‹λ‹¤)


>1. 128 ~ 256 bitμ λ¬΄μ‘μ„ μ•”νΈν™” μ‹ν€€μ¤ S μƒμ„±
2. Sλ¥Ό SHA-256μΌλ΅ ν•΄μ‹±ν• κ°’μ„ 32bitλ΅ λ‚λ μ²μ κΈΈμ΄λ¥Ό μ²΄ν¬μ„¬μΌλ΅ μƒμ„±ν•λ‹¤.
3. λ¬΄μ‘μ„ μ‹ν€€μ¤ Sμ λμ— μ²΄ν¬μ„¬μ„ μ¶”κ°€ν•λ‹¤.
4. μ‹ν€€μ¤μ™€ μ²΄ν¬μ„¬μ„ μ—°κ²°ν• κ²ƒμ„ 11bit λ‹¨μ„λ΅ λ‚λλ‹¤.
5. κ°κ°μ 11bit κ°’μ„ μ‚¬μ „μ— μ •μλ 2,048 λ‹¨μ–΄ μ‚¬μ „κ³Ό λ§¤ν•‘ν•λ‹¤.
6. λ‹¨μ–΄μ μ‹ν€€μ¤λ΅λ¶€ν„° μμ„λ¥Ό μ μ§€ν•λ©° λ‹λ¨λ‹‰ μ½”λ“λ¥Ό μƒμ„±ν•λ‹¤.

**[128λΉ„νΈ μ—”νΈλ΅ν”Ό/12λ‹¨μ–΄ μμ ]**
![](https://images.velog.io/images/holim0/post/873ad48a-a31f-41c7-be0a-3d3e820f2b30/image.png)


## λ‹λ¨λ‹‰μ—μ„ μ‹λ“κΉμ§€

β΅οΈ λ‹λ¨λ―Ή λ‹¨μ–΄λ” 128~256bit κΈΈμ΄μ μ—”νΈλ΅ν”Όλ¥Ό ν‘ν„ν•κ³  μ΄ μ—”νΈλ΅ν”Όλ” **ν‚¤ μ¤νΈλ μΉ­ ν•¨μ PBKDF2**λ¥Ό μ‚¬μ©ν•μ—¬ λ” κΈ΄(512bit) μ‹λ“λ¥Ό νμƒν•λ” λ° μ‚¬μ©λ©λ‹λ‹¤. 

ν‚¤ μ¤νΈλ μΉ­ ν•¨μμ—λ” **λ‹λ¨λ‹‰**κ³Ό **μ†”νΈ(salt)**λΌλ” λ‘ κ°€μ§€ νλΌλ―Έν„°κ°€ μμµλ‹λ‹¤.

> 7. PBKDF2 ν‚¤ μ¤νΈλ μΉ­ ν•¨μμ μ²« λ²μ§Έ μΈμλ” 6λ‹¨κ³„μ—μ„ μƒμ„± λ **λ‹λ¨λ‹‰** μ…λ‹λ‹¤.
8. PBKDF2 ν‚¤ μ¤νΈλ μΉ­ ν•¨μμ λ‘ λ²μ§Έ μΈμλ” **μ†”νΈ**μ…λ‹λ‹¤. μ†”νΈλ” λ¬Έμμ—΄ μƒμ "mnemonic"κ³Ό μ„ νƒμ μΌλ΅ μ‚¬μ©μκ°€ μ§€μ •ν• μ•”νΈλ¬Έμ„ μ—°κ²°ν•μ—¬ κµ¬μ„±ν•©λ‹λ‹¤. 
9. PBKDF2λ” μµμΆ… μ¶λ ¥μΌλ΅ 512λΉ„νΈ κ°’μ„ λ§λ“λ” HMAC-SHA512 μ•κ³ λ¦¬μ¦μΌλ΅, 2048ν•΄μ‹ λΌμ΄λ“λ¥Ό μ‚¬μ©ν•μ—¬ λ‹λ¨λ‹‰κ³Ό μ†”νΈ νλΌλ―Έν„°λ¥Ό ν™•μ¥ν•λ©°, μ΄ κ²°κ³Όλ΅ λ‚μ¨ 512 λΉ„νΈ κ°’μ΄ **seed**μ…λ‹λ‹¤.


![](https://images.velog.io/images/holim0/post/72926b42-cf9d-47b7-aab3-0e7648c6215b/image.png)


## BIP-39 μ„ νƒμ  μ•”νΈλ¬Έ

β΅οΈ BIP-39 ν‘μ¤€μ€ μ‹λ“μ νμƒμ— μ„ νƒμ  μ•”νΈλ¬Έμ„ μ‚¬μ©ν•  μ μμµλ‹λ‹¤.

μ•”νΈλ¬Έμ„ μ‚¬μ©ν•μ§€ μ•μΌλ©΄ λ‹λ¨λ‹‰μ€ μƒμ λ¬Έμμ—΄ "mnemonic"κ³Ό ν•¨κ» μ†”νΈλ¥Ό κµ¬μ„±ν•μ—¬ μ—°μ¥λ©λ‹λ‹¤. 

β” μ„ νƒμ  μ•”νΈλ¬Έμ€ λ‹¤μκ³  κ°™μ€ λ‘ κ°€μ§€ μ¤‘μ”ν• νΉμ§•μ„ μ§€λ‹™λ‹λ‹¤.

>- λ‹λ¨λ‹‰ μμ²΄λ§μΌλ΅λ” μλ―Έκ°€ μ—†λ„λ΅ λ§λ“¤μ–΄, λ‹λ¨λ‹‰ λ°±μ—…μ΄ λ„λ‚μΌλ΅λ¶€ν„° λ³΄νΈμ‹ν‚µλ‹λ‹¤.
- κ³µκ²©μμ ν‘λ°•μ‹ μ•”νΈλ¬Έμ„ κ°€λ¥΄μ³μ¤μ•Όν•  κ²½μ° κ°€μ§ μ•”νΈλ¬Έμ„ μ κ³µν•©λ‹λ‹¤.


</br>

---

# μ‹λ“λ΅ HD μ§€κ°‘ μƒμ„±ν•κΈ° 

> HD  μ§€κ°‘μ€ 128, 256 λλ” 512λΉ„νΈμ μ„μμ μ«μμΈ λ‹¨μΌ **λ£¨νΈ μ‹λ“(Root Seed)**λ¥Ό λ§λ“­λ‹λ‹¤. (λ‹λ¨λ‹‰μ΄ μƒμ„±)</br>
> HD μ§€κ°‘μ λ¨λ“  ν‚¤λ” λ£¨νΈ μ‹λ“μ—μ„ νμƒλμ—κ³ , λ¨λ“  νΈν™ HD μ§€κ°‘μ—μ„ κ·Έ μ‹λ“λ΅λ¶€ν„° μ „μ²΄ HD μ§€κ°‘μ„ μƒμ„±ν•  μ μμµλ‹λ‹¤.

![](https://images.velog.io/images/holim0/post/9568352a-1d4c-4dd1-bf39-d1567c42ba5a/image.png)

----
# HD μ§€κ°‘(BIP-32)κ³Ό κ²½λ΅(BIP-43/44)

## ν™•μ¥λ κ³µκ°ν‚¤μ™€ κ°μΈν‚¤ 

β… ν‚¤λ” ν™•μ¥λ  μ μμµλ‹λ‹¤. ν‚¤λ¥Ό ν™•μ¥ν•λ” κ²ƒμ€ ν‚¤ μμ²΄λ¥Ό κ°€μ Έμ™€μ„ νΉμ μ²΄μΈ(chain code)λ¥Ό μ¶”κ°€ν•λ” κ²ƒμ…λ‹λ‹¤. 

- λ§μ•½ ν‚¤κ°€ κ°μΈν‚¤λΌλ©΄, μ΄κ²ƒμ€ μ ‘λ‘μ–΄ **xprv**λ΅ κµ¬λ³„λλ” ν™•μ¥λ κ°μΈν‚¤κ°€ λ©λ‚λ‹¤.

```
xprv9s21ZrQH143K2JF8RafpqtKiTbsbaxEeUaMnNsmsm5o6wCW3z8ySyH4UxFVSfZ8n7ESu7fgir8imbZKLYVBxFPND1pniTZ81vKfd45EHKX73
```


- ν™•μ¥ κ³µκ°ν‚¤λ” μ ‘λ‘μ–΄ **xpub**μ— μν•΄ κµ¬λ³„λ©λ‹λ‹¤. 

```
xpub661MyMwAqRbcEnKbXcCqD2GT1di5zQxVqoHPAgHNe8dv5JP8gWmDproS6kFHJnLZd23tWevhdn4urGJ6b264DfTGKr8zjmYDjyDTi9U7iyT
```

> HD μ§€κ°‘μ λ§¤μ° μ μ©ν• νΉμ§•μ€ κ°μΈν‚¤κ°€ μ—†λ” λ¶€λ¨ κ³µκ°ν‚¤μ—μ„ μμ‹ κ³µκ°ν‚¤λ¥Ό νμƒν•  μ μλ‹¤λ” μ μ…λ‹λ‹¤.</br>
> μμ‹ κ³µκ°ν‚¤λ¥Ό νμƒν•λ” λ°©λ²•μ€ 2κ°€μ§€μ…λ‹λ‹¤.
- μμ‹ κ°μΈν‚¤λ΅λ¶€ν„° μ§μ ‘ νμƒ
- λ¶€λ¨ κ³µκ°ν‚¤λ΅λ¶€ν„° μ§μ ‘ νμƒ

</br>

## κ°•ν™”λ μμ‹ ν‚¤μ νμƒ

>β… λ§μ•½ μμ‹ ν™•μ¥ κ°μΈν‚¤κ°€ μ μ¶λλ” κ²½μ°, μμ‹ ν™•μ¥ κ°μΈν‚¤κ°€ ν¬ν•¨ν•κ³  μλ” ν‚¤μ™€ μ²΄μΈμ½”λ“λ¥Ό μ‚¬μ©ν•λ©΄ λ‹¤λ¥Έ μμ‹μ κ°μΈν‚¤ μ „λ¶€λ¥Ό μ•μ•„λ‚Όμ μμµλ‹λ‹¤. </br>
>-> μ΄λ¬ν• λ¬Έμ μ— λ€μ‘ν•κΈ° μ„ν•΄ HD μ§€κ°‘μ€ **κ°•ν™”νμƒ(hardened derivation)**μ΄λΌκ³  ν•λ” λ€μ²΄ κ°€λ¥ νμƒ ν•¨μλ¥Ό μ‚¬μ©ν•μ—¬ λ¶€λ¨ κ³µκ°ν‚¤μ™€ μμ‹ μ²΄μΈμ½”λ“κ°„μ κ΄€κ³„λ¥Ό λμ–΄ λ¶€λ¨/μμ‹ μ‹ν€€μ¤μ— **λ°©ν™”λ²½**μ„ μƒμ„±ν•μ—¬ κ°μΈν‚¤ μ μ¶μ— λ°©μ§€ν•©λ‹λ‹¤.

</br>


## μΌλ° λ° κ°•ν™” νμƒμ„ μ„ν• μΈλ±μ¤ λ²νΈ

>μ£Όμ–΄μ§„ λ¶€λ¨ ν‚¤λ΅ λ¶€ν„° ν•λ‚ μ΄μƒμ μμ‹ ν‚¤λ¥Ό νμƒν•  μ μμµλ‹λ‹¤. μ΄λ¥Ό κ΄€λ¦¬ν•κΈ° μ„ν•΄ μΈλ±μ¤ μ«μκ°€ μ‚¬μ©λ©λ‹λ‹¤. </br>
>BIP-32 λ¶€λ¨-μμ‹ νμƒ ν•¨μμ—μ„ μ‚¬μ©λλ” μΈλ±μ¤ μ«μλ” 32λΉ„νΈ μ •μμ…λ‹λ‹¤.
- μΌλ°μ μΈ νμƒ:0κ³Ό 2^31-1(0x0 ~ 0x7FFFFFFF)μ‚¬μ΄μ— μΈλ±μ¤ μ«μ
- κ°•ν™” νμƒ: 2^31κ³Ό 2^32-1(0x80000000 ~ 0xFFFFFFFF)μ‚¬μ΄μ— μΈλ±μ¤ μ«μ

</br>

## HD μ§€κ°‘ ν‚¤ μ‹λ³„μ(κ²½λ΅)

> HD μ§€κ°‘μ ν‚¤λ” κ²½λ΅(path) κ·μΉ™μ„ μ‚¬μ©ν•μ—¬ μ‹λ³„ν•λ©°, νΈλ¦¬μ κ° λ λ²¨μ€ μ¬λμ‹(/) λ¬Έμλ΅ κµ¬λ¶„ν•©λ‹λ‹¤. </br> 
> λ§μ¤ν„° κ°μΈν‚¤μ—μ„ μƒμ„±λ κ³µκ°ν‚¤λ” MμΌλ΅ μ‹μ‘ν•λ©°, λ§μ¤ν„° κ°μΈν‚¤μ μ²« λ²μ§Έ μμ‹ κ°μΈν‚¤λ” m/0 κ³µκ°ν‚¤λ” M/0μ…λ‹λ‹¤.

</br>

## HD μ§€κ°‘ νΈλ¦¬ κµ¬μ΅° νƒμƒ‰

β… BIP-44λ” λ©μ  λ²νΈλ¥Ό 44λ΅ μ„¤μ •ν•μ—¬ λ³µμν™”ν λ³µμκ³„μ • κµ¬μ΅°λ¥Ό μ μ•ν•©λ‹λ‹¤.

BIP-44λ¥Ό λ”°λ¥΄λ” λ¨λ“  HDμ§€κ°‘ κµ¬μ΅°λ” λ‹¨μ§€ ν•λ‚μ νΈλ¦¬ λ¶„κΈ°(m/44β€™/*)λ§μ„ μ‚¬μ©ν•λ‹¤λ” μ‚¬μ‹¤μ— μν•΄ μ‹λ³„ λ©λ‹λ‹¤. 



β΅οΈ BIP-44 λ” λ―Έλ¦¬ μ •μλ 5κ°μ νΈλ¦¬ λ λ²¨λ΅ κµ¬μ„±λ©λ‹λ‹¤.

`m / purpose' / coin_type' / account' / change / address_index`

- purpose' : 44' λ΅ μ„¤μ •λλ©° BIP-44 κ·κ²©μ„μ„ μλ―Έ

- coin_type' : κ°€μƒν™”ν μ ν•μ„ μλ―Έ, μ΄λ”λ¦¬μ›€μ€ 60' μ„ μ‚¬μ©

- account : μ§€κ°‘μ„ ν•μ„ κ³„μΆλ΅ μ„Έλ¶„ν™” ν• λ• μ‚¬μ©

- change : μ΄λ”λ¦¬μ›€μ—μ„λ” μ‚¬μ©λμ§€ μ•μΌλ©° λΉ„νΈμ½”μΈμ—μ„λ” μμ‹ μ£Όμ†μ™€ μ”μ•΅ μ£Όμ†λ¥Ό κµ¬λ¶„ν•λ”λ° μ‚¬μ©

- address_index : μ£Όμ† λ²νΈλ¥Ό μλ―Έ

</br>

---

# λ§λ¬΄λ¦¬

μ΄λ² μ‹κ°„μ—λ” μ΄λ”λ¦¬μ›€μ—μ„μ μ§€κ°‘μ— λ€ν•΄μ„ μ•μ•„λ³΄μ•μµλ‹λ‹¤. 

λ‹¤μ μ‹κ°„μ—λ” νΈλμ­μ…μ— λ€ν•΄μ„ μ•μ•„λ³΄κ² μµλ‹λ‹¤.